@* Confirmation Dialog - For Yes/No or OK/Cancel confirmations *@

@if (IsVisible)
{
    <div class="modal modal-open" style="display: flex !important; align-items: center !important; justify-content: center !important;">
        <div class="modal-box max-w-md relative">
            <!-- Icon and Title -->
            <div class="flex items-start gap-4 mb-4">
                <div class="text-4xl flex-shrink-0">
                    @Icon
                </div>
                <div class="flex-1">
                    <h3 class="font-bold text-xl mb-2">@Title</h3>
                    <p class="text-gray-600 whitespace-pre-line">@Message</p>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="pt-4 mt-4 flex justify-center gap-3">
                <button class="btn btn-ghost w-[300px]" @onclick="HandleCancel">
                    @CancelButtonText
                </button>
                <button class="btn @ConfirmButtonClass w-[300px]" @onclick="HandleConfirm">
                    @ConfirmButtonText
                </button>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public EventCallback<bool> IsVisibleChanged { get; set; }
    [Parameter] public string Title { get; set; } = "Confirm";
    [Parameter] public string Message { get; set; } = "Are you sure?";
    [Parameter] public string Icon { get; set; } = "‚ùì";
    [Parameter] public string ConfirmButtonText { get; set; } = "Yes";
    [Parameter] public string CancelButtonText { get; set; } = "No";
    [Parameter] public string ConfirmButtonClass { get; set; } = "btn-primary";
    [Parameter] public EventCallback<bool> OnResult { get; set; }

    private async Task HandleConfirm()
    {
        if (IsVisibleChanged.HasDelegate)
        {
            await IsVisibleChanged.InvokeAsync(false);
        }
        await OnResult.InvokeAsync(true);
    }

    private async Task HandleCancel()
    {
        if (IsVisibleChanged.HasDelegate)
        {
            await IsVisibleChanged.InvokeAsync(false);
        }
        await OnResult.InvokeAsync(false);
    }
}
