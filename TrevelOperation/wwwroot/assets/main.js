let a=null;const c="travel-expense-theme-preference",s="dark",i="light",l={initialize:function(e,t=i){a=e;const o=localStorage.getItem(c)||t;this.applyThemeWithoutAnimation(o),this.fixBackgroundColors(),this.listenForSystemPreferenceChanges(),a&&a.invokeMethodAsync("NotifyThemeChanged",o)},getCurrentTheme:function(){return document.documentElement.getAttribute("data-theme")||s},setTheme:function(e){if(e!==s&&e!==i){console.error(`Invalid theme: ${e}. Must be 'dark' or 'light'`);return}this.getCurrentTheme()!==e&&(this.applyThemeWithAnimation(e),this.fixBackgroundColors(),localStorage.setItem(c,e),a&&a.invokeMethodAsync("NotifyThemeChanged",e))},toggleTheme:function(){const t=this.getCurrentTheme()===s?i:s;this.setTheme(t)},fixBackgroundColors:function(){const e=document.body,t=document.documentElement;e.style.backgroundColor="",t.style.backgroundColor="",this.getCurrentTheme()===i?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))},applyThemeWithAnimation:function(e){document.documentElement.setAttribute("data-theme",e)},applyThemeWithoutAnimation:function(e){document.documentElement.setAttribute("data-theme",e)},listenForSystemPreferenceChanges:function(){if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)");if(!localStorage.getItem(c)){const t=e.matches?s:i;this.applyThemeWithoutAnimation(t),this.fixBackgroundColors()}e.addEventListener("change",t=>{if(!localStorage.getItem(c)){const n=t.matches?s:i;this.applyThemeWithAnimation(n),this.fixBackgroundColors()}})}}};window.themeManager=l;window.themeManager=l;window.downloadFile=(e,t,n)=>{const o=new Blob([n],{type:t}),h=window.URL.createObjectURL(o),r=document.createElement("a");r.href=h,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(h)};window.validateCsvFile=e=>({isValid:e.type==="text/csv"||e.name.toLowerCase().endsWith(".csv"),size:e.size,name:e.name});window.showToast=(e,t)=>{const n=document.createElement("div");n.className=`alert alert-${e} shadow-lg fixed top-4 right-4 w-96 z-[9999] animate-fade-in`;let o="";switch(e){case"success":o='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>';break;case"error":o='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>';break;case"warning":o='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>';break;case"info":o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';break}n.innerHTML=`
        <div>
            ${o}
            <span>${t}</span>
        </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.classList.add("animate-fade-out"),setTimeout(()=>{document.body.removeChild(n)},300)},5e3)};
